# Prompt: Read `brain.yaml` from the repository root and follow it strictly. If `brain.yaml` is missing, stop and ask the user to add/copy the standard `brain.yaml` template into the repo.
#
# brain.yaml â€” Option B (authoritative, final)
# Purpose:
# - Persist ONLY rules, constraints, conventions and workflows.
# - NO project descriptions, NO goals, NO roadmap content.
# - Documentation files are created automatically, but without TODOs or fake content.

meta:
  schema_version: 1
  policy_variant: "Option B"
  last_updated: "YYYY-MM-DD"

language:
  documentation: "English"
  code_comments: "English"

files:
  required:
    - "README.md"
    - "PATCHNOTES.md"
    - "ROADMAP.md"
  optional:
    - "docs/decisions.md"

responsibilities:
  brain_yaml:
    contains_only:
      - "rules"
      - "constraints"
      - "conventions"
      - "workflows"
      - "policies"
    must_not_contain:
      - "project_description"
      - "goals"
      - "roadmap_content"
      - "marketing_copy"
  readme_md:
    purpose: "Project description, purpose, setup, usage."
  roadmap_md:
    purpose: "Goals, milestones, planned features and scope."
  patchnotes_md:
    purpose: "Versioned, user-visible changes."

documentation:
  keep_up_to_date: true
  no_duplication_between_files: true
  tone: "technical"

documentation_rules:
  placeholders:
    allow_todo: false
    allow_tbd: false
    allow_fake_content: false
    allow_unknown_placeholders: false

bootstrap:
  # CRITICAL: makes bootstrap mandatory instead of permissive
  execute_on_session_start: true

  create_required_docs_if_missing: true

  behavior_when_no_project_info:
    # Option B behavior
    ask_user_first: false
    create_minimal_docs: true
    do_not_invent_content: true
    do_not_add_placeholders: true
    require_honest_state_notice: true

bootstrap_templates:
  # Used ONLY when files are missing and no project info exists.
  # Must remain minimal, honest and non-committal.
  README.md: |-
    # Project Title

    This project has been initialized, but no project-specific documentation
    has been defined yet.

    This README will be expanded once the project scope, purpose, setup,
    and usage are specified.

  ROADMAP.md: |-
    # Roadmap

    No roadmap has been defined yet.

    Planned goals and milestones will be documented here once the project
    direction is clarified.

  PATCHNOTES.md: |-
    # Patch Notes

    ## Unreleased
    - Initial project setup.

documentation_update_triggers:
  on_user_visible_change:
    - "PATCHNOTES.md"
  on_breaking_change:
    - "PATCHNOTES.md"
  on_scope_or_plan_change:
    - "ROADMAP.md"
  on_usage_or_setup_change:
    - "README.md"

versioning:
  scheme: "semantic_versioning"
  current_version: "0.1.0"
  change_types:
    - "breaking"
    - "feature"
    - "improvement"
    - "fix"
    - "docs"

conventions:
  commits:
    standard: "conventional_commits"
    allowed_types:
      - "feat"
      - "fix"
      - "refactor"
      - "perf"
      - "test"
      - "build"
      - "ci"
      - "chore"
      - "docs"
    rules:
      - "Use imperative mood in subject."
      - "Keep subject <= 72 characters."
    examples:
      - "feat(core): add item lookup"
      - "fix(api): handle null supplier"
      - "docs: update README"

workflow:
  mandatory_bootstrap_actions:
    - "Create missing required documentation files on session start"

  guardrails:
    - "Never violate constraints."
    - "Never invent project scope or goals."
    - "Never add TODO/TBD placeholders to documentation."
    - "Always keep documentation in sync with changes."

  default_steps_for_change:
    - "Implement change"
    - "Update documentation via triggers"
    - "If a new stable rule or decision emerges: update brain.yaml"
    - "Keep changes minimal and reviewable"

constraints:
  hard:
    - "Define hard constraints here (e.g., local-first, no cloud)."
  non_goals:
    - "Define explicit non-goals here."
  quality:
    - "Prefer clarity over cleverness."
    - "Avoid unnecessary abstractions."
    - "Avoid speculative features."

architecture_policy:
  enabled: true
  decisions_file: "docs/decisions.md"
  decisions_are_append_only: true
  decision_format:
    required_sections:
      - "Context"
      - "Decision"
      - "Reasoning"
  when_to_write_decision:
    - "New dependency or major library choice"
    - "Database schema strategy change"
    - "Architecture pattern change"
    - "Breaking change justification"

conflict_policy:
  if_user_instruction_conflicts_with_brain_yaml:
    behavior: "surface_conflict_and_propose_update"
