# brain.yaml
# Single source of truth for project rules, constraints, conventions and workflows.
# DO NOT store project descriptions or goals here (belongs to README.md / ROADMAP.md).
#
# Prompt: Read `brain.yaml` from the repository root and follow it strictly. If `brain.yaml` is missing, stop and ask the user to add/copy the standard `brain.yaml` template into the repo.

meta:
  schema_version: 1
  owner: "Stephan"
  last_updated: "TODO: YYYY-MM-DD"

language:
  documentation: "English"
  code_comments: "English"

files:
  required:
    - "README.md"
    - "PATCHNOTES.md"
    - "ROADMAP.md"
  optional:
    - "docs/decisions.md"
    - "docs/architecture.md"
    - "docs/conventions.md"

responsibilities:
  brain_yaml:
    contains:
      - "rules"
      - "constraints"
      - "conventions"
      - "workflows"
      - "decisions_policy"
    must_not_contain:
      - "project_description"
      - "goals"
      - "roadmap_content"
  readme:
    must_contain:
      - "project_description"
      - "purpose"
      - "setup"
      - "usage"
  roadmap:
    must_contain:
      - "goals"
      - "milestones"
      - "planned_features"
  patchnotes:
    must_track:
      - "user_visible_changes"
      - "breaking_changes"

documentation_rules:
  global:
    must_be_current: true
    no_duplication_between_files: true
    tone: "technical"
  update_triggers:
    on_user_visible_change:
      - "PATCHNOTES.md"
    on_scope_or_plan_change:
      - "ROADMAP.md"
    on_usage_or_setup_change:
      - "README.md"

bootstrap:
  ensure_files_exist: true
  create_missing_files_with_todos: true
  do_not_invent_project_specifics: true

missing_info_policy:
  if_project_specific_info_missing:
    behavior: "ask_user_first"
    questions:
      - "What is the project about?"
      - "What is the primary goal?"
      - "Any explicit non-goals or hard constraints?"
    allow_todos_if_safe: true

versioning:
  scheme: "semantic_versioning"
  current_version: "0.1.0"
  change_types:
    - "breaking"
    - "feature"
    - "improvement"
    - "fix"

conventions:
  commits:
    standard: "conventional_commits"
    examples:
      - "feat(scope): add X"
      - "fix(scope): correct Y"
      - "docs: update README"
  branching:
    model: "simple"
    rules:
      - "Keep main branch releasable"
      - "Use short-lived feature branches when useful"
  code_style:
    enforce: false
    notes: "TODO: add formatter/linter rules if needed"

workflow:
  guardrails:
    - "Do not violate constraints"
    - "Do not add scope without updating ROADMAP.md"
    - "Do not change user-facing behavior without PATCHNOTES.md"
  default_steps_for_changes:
    - "Implement change"
    - "Update docs based on triggers"
    - "If new stable rule/decision emerges: update brain.yaml"
    - "Keep changes minimal and reviewable"

constraints:
  hard:
    - "TODO: add hard constraints (e.g., local-first, no cloud, etc.)"
  non_goals:
    - "TODO: add explicit non-goals (scope boundaries)"
  quality:
    - "Prefer clarity over cleverness"
    - "Avoid unnecessary abstractions"
    - "Avoid speculative features"

architecture_policy:
  enabled: true
  decisions_file: "docs/decisions.md"
  decisions_are_append_only: true
  decision_format:
    required_sections:
      - "Context"
      - "Decision"
      - "Reasoning"
  when_to_write_decision:
    - "New dependency or major library choice"
    - "Database schema strategy change"
    - "Architecture pattern change"
    - "Breaking change justification"
